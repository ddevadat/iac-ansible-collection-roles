apiVersion: v1
kind: Namespace
metadata:
  name: oidc

---
apiVersion: v1
kind: ServiceAccount
metadata:
  name: oci-aws-sa
  namespace: oidc
automountServiceAccountToken: false

---
apiVersion: v1
kind: Pod
metadata:
  name: nginx
  namespace: oidc
spec:
  containers:
  - image: nginx
    name: nginx
    volumeMounts:
    - mountPath: /var/run/secrets/tokens
      name: vault-token
  serviceAccountName: oci-aws-sa
  volumes:
  - name: vault-token
    projected:
      sources:
      - serviceAccountToken:
          path: vault-token
          expirationSeconds: 7200
          audience: vault