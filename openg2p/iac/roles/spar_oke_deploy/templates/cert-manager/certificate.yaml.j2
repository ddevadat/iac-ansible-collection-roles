apiVersion: cert-manager.io/v1
kind: Certificate
metadata:
  name: {{ domain | replace('.', '-') }}
  namespace: istio-system
spec:
  dnsNames:
    - "api.{{domain}}"
    - "prereg.{{domain}}"
    - "resident.{{domain}}"
    - "esignet.{{domain}}"
    - "spar.{{domain}}"
    - "grafana.{{domain}}"
    - "keycloak.{{domain}}"
    - "opensearch.{{domain}}"
    - "postgres.{{domain}}"
    - "api-internal.{{domain}}"
    - "activemq.{{domain}}"
    - "kibana.{{domain}}"
    - "regclient.{{domain}}"
    - "admin.{{domain}}"
    - "minio.{{domain}}"
    - "kafka.{{domain}}"
    - "pmp.{{domain}}"
    - "smtp.{{domain}}"
    - "compliance.{{domain}}"
    - "odk.{{domain}}"
    - "keymanager.{{domain}}"
  issuerRef:
    name: letsencrypt-staging
    kind: ClusterIssuer
  secretName: {{ domain | replace('.', '-') }}
