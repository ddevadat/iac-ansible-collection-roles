- name: Get a specific zone
  oracle.oci.oci_dns_zone_facts:
    compartment_id: "{{compartment_id}}"
    name: "test.{{domain}}"
  register: result
  
# - name: Dump result
#   debug: 
#     msg: '{{result}}'

# - name: Zone not found
#   debug:
#     msg: "Zone test.{{domain}} not found"
#   when: result.zones | length == 0

# - name: Zone  found
#   debug:
#     msg: "Zone test.{{domain}}  found"
#   when: result.zones | length != 0

- name: Create zone 
  oracle.oci.oci_dns_zone:
    name: "test.{{domain}}"
    compartment_id: "{{compartment_id}}"
    zone_type: PRIMARY
  when: result.zones | length == 0